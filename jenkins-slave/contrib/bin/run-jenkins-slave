#!/bin/sh -e

JENKINS_DIR="/opt/app-root/jenkins"
JENKINS_MASTER_URL="http://jenkins:8080/jenkins/"
SWARM_CLIENT_JAR="${JENKINS_DIR}/swarm-client-2.0-jar-with-dependencies.jar"

exec java -jar ${SWARM_CLIENT_JAR} \
  -master ${JENKINS_MASTER_URL} \
  -labels builder \
  -mode exclusive \
  -name $(hostname) \
  -fsroot ${JENKINS_DIR} \
  -disableSslVerification
